---
title: "Week 1 -- Introduction to R and RStudio"
---
<img src="images/CRUK_CI_logo.png" alt="CRUK CI Logo" height="100" width="400">    

# Introduction

## Aims and Objectives of this lesson

### Aim
* To introduce the Rstudio program that we will be using, to write R scripts, in this course.
* Demonstrate the ways in which R can store data.
* Show how R functions can operate on such data.    

### Objectives
* Explain the functions of the various panes in Rstudio.
* Introduce the concept of vectors and the types of data that they can hold.
* Present the different ways that a user can access documentation in R and when to use them.
* Demonstrate the basic format for using an R function.
* Teach some simple but useful functions in R.

---

_From the Introduction of the __Data Carpentry in R__ course._   

## Why learn R?   
* R does not involve lots of pointing and clicking, and that’s a good thing
The learning curve might be steeper than with other software, but with R, the results of your analysis do not rely on remembering a succession of pointing and clicking, but instead on a series of written commands, and that’s a good thing! So, if you want to redo your analysis because you collected more data, you don’t have to remember which button you clicked in which order to obtain your results; you just have to run your script again.    
Working with scripts makes the steps you used in your analysis clear, and the code you write can be inspected by someone else who can give you feedback and spot mistakes.   
Working with scripts forces you to have a deeper understanding of what you are doing, and facilitates your learning and comprehension of the methods you use.

* R code is great for reproducibility
Reproducibility is when someone else (including your future self) can obtain the same results from the same dataset when using the same analysis.

* R integrates with other tools to generate manuscripts from your code.    
If you collect more data, or fix a mistake in your dataset, the figures and the statistical tests in your manuscript are updated automatically.
An increasing number of journals and funding agencies expect analyses to be reproducible, so knowing R will give you an edge with these requirements.

* R is interdisciplinary and extensible
With 10,000+ packages that can be installed to extend its capabilities, R provides a framework that allows you to combine statistical approaches from many scientific disciplines to best suit the analytical framework you need to analyze your data. For instance, R has packages for image analysis, GIS, time series, population genetics, and a lot more.

* R works on data of all shapes and sizes
The skills you learn with R scale easily with the size of your dataset. Whether your dataset has hundreds or millions of lines, it won’t make much difference to you.

* R is designed for data analysis.   
It comes with special data structures and data types that make handling of missing data and statistical factors convenient.    
R can connect to spreadsheets, databases, and many other data formats, on your computer or on the web.

* R produces high-quality graphics
The plotting functionalities in R are endless, and allow you to adjust any aspect of your graph to convey most effectively the message from your data.

* R has a large and welcoming community
Thousands of people use R daily. Many of them are willing to help you through mailing lists and websites such as Stack Overflow, or on the RStudio community.

* Not only is R free, but it is also open-source and cross-platform
Anyone can inspect the source code to see how R works. Because of this transparency, there is less chance for mistakes, and if you (or someone else) find some, you can report and fix bugs.

---

# Rstudio  a brief tour
Rstudio provides us with a friendly interface to the R statistical progrmming language.
It consists of four main"Panes". These can be re-sized and moved around to suit how
you like to work.    
<img src="images/Rstudioataglance.png" alt="Rstudio screenshot" width="90%">    

## Editing pane
By default the top left-hand pane is one for creating, editing & running R scripts.
<img src="images/Rstudio_scripting.png" alt="Rstudio edit pane screenshot" width="90%">    
A script is an R program that you have written. A good practice is for that script to
perform only one role in your analysis workflow and so you may have several R scripts which you call, in a particular sequence, to analyse your data.    
As you will see, a script is basically a text file that contains R commands and
(ideally) comments to explain what the codes function is (As a Documentation process).    
As well as R scripts, there are many types of Rstudio document including Markdown files which we will use in the teaching of this course. These can provide interactive workbooks or pdf and web documents to name but a few possible outcomes.    

## Console
Coming down the screen to the bottom left-hand pane we find the console window. This is where we can find output produced by running our R scripts.     
<img src="images/Rstudio_console.png" alt="Rstudio screenshot" width="90%">    
    
    
   
We can also try out snippets of R code here. Those of you who have only used graphical interfaces like Windows or MacOS where you click on commands using a mouse may find this aspect of R somewhat different. We type in commands to R using the command-line.   

This area can also be used like a calculator. Let's just type in something like 23 + 45 followed by the return key and see what happens. We get  _[1] 68_. Now 68 is clearly the answer but what is that 1 in brackets?   

Here is another example to explain. If we type _1:36_ and press enter - what happens?   
R generates output counting from 1 to 36 but cannot fit all the output on one line and so starts another like this:
_ [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27
[28] 28 29 30 31 32 33 34 35 36_    
Now we ave two lines beginning with a number in square brackets.    

This is just R helping us to keep tabs on which number we are looking at [1] denotes that the line starts with the first result and the [28] denotes that this line starts with the 28th result. Let's try another one and generate a sequence incrementing in steps of 2:     
_1:36 * 2    
 [1]  2  4  6  8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54   
[28] 56 58 60 62 64 66 68 70 72_   

There are other tabs on this pane but we shall not be covering these on this course.

## Environment
Next we move to the top right-hand corner pane. Here we have even more tabs (of which we will only consider two Environment and History).    
<img src="images/Rstudio_env.png" alt="Rstudio screenshot" width="90%">   
Environment keeps track on R variables which we create (more on those later) and their contents. History is like a tally role of all the R commands we have entered in our session.

## Files, Plots & Help
Our final bottom right-hand pane also has several tabs. The Files tab s a file explorer that enable us to move around our directories and select which files we wish to work on. We can also change the default working directory that Rstudio will use 
(Absolute & Relative paths).   
In fact, it's a good practice to create a new R project and some sub-directories of it whenever we start a piece of work. Try and adopt a 'standard' structure.    
<img src="images/Rstudio_filexpl.png" alt="Rstudio screenshot" width="90%">    
The Plots tab is where any graphs that we create in R will appear. We can move through them using the arrow buttons and the export button will convert them to different graphics formats e.g. for publication in a paper or for the web.    
The Packages tab shows which R packages are installed (These expand R's functionallity and again will be covered later) and can also install new packages.    
The Help tab is a _massively useful_ tab which enables you to search R help index to get help pages on R functions and provide example code to help you use them in your R scripts.

# Our first look at the R language
Our overall goal for this course is to give you the ability to import your data into R, perform some selecting of data of interest, summary analysis and visualisation.
First though, let us consider __“What is Data?”__    

Data comes in many forms: Numbers (Integers and decimal values) or alphabetical  (characters or lines of text). Clearly a computer (or R) needs a way of representing this wide range of data with it’s diverse properties.  

 _The pigeon-hole analogy:-    
 R stores data in contiguous sections of computer memory a bit like the pigeon-holes used in many internal mail systems. These holes are indexed e.g by 1st letter of surname or a range of letters e.g. A-C.    
Internal mail systems can carry different types of traffic small notes, large envelopes or parcels with different dimensions so there may be rows associated with small letters, big letters and parcels.   
For a system like this it makes sense that a row contains the same type of mail with similar dimensions to avoid wasting space._

## Storing our first R data value
R has an equivalent to this called a Vector – everything is represented as a vector.   
For example say we had a single numerical value 8 and this was the number of samples in an experiment – an R vector can be created (or assigned) thusly:
```{r}
samples <- 8
```
The <- is the assignment action, Samples is our Vector
If we just type _samples_ followed by the return key R will print the contents of the vector called samples (Try it). Notice that Rstudio tries to help us by autocompleting the variable name to avoid mis-typing.   
Be kind to yourself and use meaningful names for your vectors like samples rather than s. When you come back to your code after 6 months or give it to colleagues it will be more obvious what your program is doing and how it works. Also, note that the variable Samples is different to the variable samples (__Case matters__).   
```{r}
samples <- 8
Samples <- 24
samples
Samples
```

What if we found out that there were actually 12 samples? We can correct this by re-assigning the value of samples:    
Now try outputting the value – is it 12 or 8?
```{r}
samples <- 12
```

Of course our data is often a decimal value e.g. 
```{r}
ph <- 5.5
```

Or we may have a name e.g.    
```{r}
drug <- "Gefitinib"
```

## Storing more than one value
We are much more likely to want to store a series of data e.g. observation values. Vectors can take any number of values but the assignment statement changes slightly.
```{r}
obs <- c(2,5,8,5,8,2)
```
What happens when you ask R to print obs?   
Calculations can also be included in assignments e.g. we might have a column supplied in one type of units and we need it in another.    
```{r}
new_obs <- obs * 2.2
new_obs
smaller <- samples / 2
smaller
```
__Notice__ that each and every element of the vector has been multiplied by 2.2. This is what was happening when we used 1:30 * 2.    
|Symbol | Effect|
| --- | ---  |
| +   |	Addition |
| – 	| Subtraction |
| * 	| Multiplication |
| / 	| Division |
| ^ 	| Exponent |
| %% 	| Modulus (Remainder) |
| %/% |	Integer Division |
    
Similarly, we can have long vectors of text strings:   
```{r}
animals <- c('cat', 'dog', 'mouse')
drugs <- c('Gefitinib', 'FCR', "Vincristine" )
bases <- c("c","g","t","a","n")
```
What happens if you print these?    

## Our first  R function – help
Functions are like mathematical functions they take argument(s) and return a result and the arguments are enclosed in brackets. They extend the capabilities of R. 
A function that you will find most ‘helpful’ is the help() function. It provides help on a topic that is supplied as the argument.
Try    
```{r}
help(help)
```
The result appears in the bottom left-hand pane.   
Notice how Rstudio tries to help you by suggesting what the arguments could be (in floating yellow text box).   
_Need more help?_ You can also use ?<command> i.e. ?help.   
If you know roughly what you need but not the actual function name use ?? e.g. ??average.   
What if you know the function name but can't recall what the arguments are?
Try args() function e.g. args(plot,default).    

### More useful functions
length() to find out how many elements are in a vector
```{r}
length(animals)
```
class() will tell you the class (suprise) of a vector e.g. charactter or numeric
```{r}
class(animals)
class(obs)
```
str() reports the structure of an object. This terse report includes such useful information as class, index range of elements e.g. 1..n and the values contained therein.   
```{r}
str(obs)
```
typeof() - reports how object is sored e.g. integer or double
```{r}
?typeof
typeof(samples)
```
summary() -  one of my __favourite__ functions. R gives an object summary of the vector. this means that what is returned depends on the vector. I often use it on data after I have read it in from a file to do a 'sanity check' and find maximum and minimum vlues etc to spot unexpected values.
```{r}
summary(obs)
```
So-called 'Base' R does possess plotting functions. However, later lessons will teach you how to plot using a much more powerful and easy-to-use _Tidyverse_ package called _ggplot2_.   
Just to demonstrate a function with multiple paramaeters, I will use base R plot here. Once you have read in your data you may wish to do a quick & dirty plot it e.g. to spot any trends or outliers. This can be done quickly in R (but much more easily in ggplot2).       
```{r}
 X <- c(1,2,3,4,5)
 Y <- c(9, 17, 23, 38, 52)
 plot.default(X,Y, pch = 4, col = "red")
```

----

Over to you for the assignment - see you again at the end of the week!    
